<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>âœ¨MagicPaletteAnalyzer - ç”»åƒã‹ã‚‰è‰²ã‚’å¬å–šã™ã‚‹é­”å°å…· ver 0.0.4</title>
  <meta name="viewport" content="initial-scale=1.0,width=device-width,viewport-fit=cover">
  <meta name="description"
  content="MagicPaletteAnalyzer - ç”»åƒã«å®¿ã‚‹è‰²ã®ç²¾éœŠã‚’å¯è¦–åŒ–ã™ã‚‹ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã€‚ç³ã®è‰²ã‹ã‚‰é¢¨æ™¯ã¾ã§ã€ã‚ã‚‰ã‚†ã‚‹ç”»åƒã‚’16è‰²ã®é­”æ–¹é™£ã¸å¤‰æ›ã€‚è¡“å¸«ã®ãŸã‚ã®è‰²å½©éŒ¬é‡‘è¡“ãƒ„ãƒ¼ãƒ«ã€‚">
  <!-- Tailwind CSS CDNï¼ˆç°¡æ˜“çš„ãªåˆ©ç”¨ä¾‹ï¼‰ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- TailwindCSSã§dark modeã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®è¨­å®šä¾‹ -->
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
  <meta property="og:url" content="https://haruharu-1105.github.io/MagicPaletteAnalyzer/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="MagicPaletteAnalyzer">
  <meta property="og:description" content="ç”»åƒã«æ½œã‚€è‰²ã®ç²¾éœŠã‚’16è‰²ã®é­”æ³•é™£ã«å°ã˜è¾¼ã‚ã€‚ç³ã®è¼ãã‹ã‚‰é¢¨æ™¯ã®æ¯å¹ã¾ã§ã€ã‚ã‚‰ã‚†ã‚‹ç”»åƒã‚’è‰²å½©éŒ¬é‡‘è¡“ã§å†æ§‹ç¯‰ã€‚è¡“å¸«ã®ãŸã‚ã®ãƒ‘ãƒ¬ãƒƒãƒˆç”Ÿæˆå„€å¼ã€‚">
  <meta name="google" content="notranslate">
  <style>
    #canvas-container {
      position: relative;
    }
    .color-preview {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid white;
      display: none;
      justify-content: center;
      align-items: center;
      font-size: 16px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
      pointer-events: none;
      transition: transform 0.1s ease-out;
    }
  </style>
</head>
<body class="bg-gray-100 text-[#1a1a1a] dark:text-[#e0e0e0] mx-4 w-full dark:bg-gray-900">
  <!-- å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="fixed top-0 left-0 w-full shadow z-50 bg-white dark:text-[#e0e0e0] dark:bg-gray-800">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ä¸Šéƒ¨ï¼šã‚¿ã‚¤ãƒˆãƒ«ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ä½¿ç”¨æ–¹æ³•ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ã€GitHubãƒªãƒ³ã‚¯ã€ãƒ†ãƒ¼ãƒåˆ‡æ›¿ -->
    <div class="flex items-center justify-between px-4 py-2">
      <div>
        <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
        <h1 class="text-2xl font-bold">MagicPaletteAnalyzer<span class="hidden md:inline">âœ¨ğŸ¨ğŸ”</span></h1>
        <!-- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ -->
        <span class="text-sm text-gray-500 dark:text-white-500">ver 0.0.4</span>
      </div>
      <div class="flex items-center gap-4">
        <!-- ä½¿ç”¨æ–¹æ³•ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ -->
        <div class="ml-4">
          <details class="border border-gray-300 p-2 rounded">
            <summary class="text-lg font-semibold cursor-pointer">ğŸ“‹ä½¿ç”¨æ–¹æ³•</summary>
            <div>
              <p>1. ç”»åƒã®èª­ã¿è¾¼ã¿</p>
              <ul class="list-disc list-inside ml-4">
                <li>a,ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ç”»åƒã‚’é¸æŠã—ã¾ã™ã€‚</li>
                <li>b,ã€Œã“ã“ã«ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã€ã«ç”»åƒã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™ã€‚</li>
                <li>c, ç”»åƒã‚’ã‚³ãƒ”ãƒ¼ã—ãŸçŠ¶æ…‹ã§ã€Œã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰èª­ã¿è¾¼ã‚€ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚</li>
              </ul>
              <p>2. ãƒ‘ãƒ¬ãƒƒãƒˆã®å†…å®¹ç¢ºèªï¼š</p>
              <ul class="list-disc list-inside ml-4">
                <li>ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã«åˆ†æã•ã‚ŒãŸè‰²ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</li>
                <li>ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã§é¸æŠã—ãŸè‰²ã®å±¥æ­´ã‚’ç¢ºèªã§ãã¾ã™ã€‚</li>
              </ul>
            </div>
          </details>
        </div>
        <!-- GitHubãƒªãƒ³ã‚¯ -->
        <a href="https://github.com/haruharu-1105/MagicPaletteAnalyzer" target="_blank" rel="noopener"
        class="hidden md:inline text-blue-500 hover:underline">GitHub</a>
        <!-- ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãƒœã‚¿ãƒ³ -->
        <button id="theme-toggle" class="p-2 border rounded focus:outline-none">
          <span></span><span class="hidden md:inline">ãƒ¢ãƒ¼ãƒ‰ã¸</span>
        </button>
      </div>
    </div>
  </header>
  <!-- ãƒšãƒ¼ã‚¸å…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼šã‚µã‚¤ãƒ‰ãƒãƒ¼ã¨ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="flex pt-24">
    <!-- å·¦å´ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆå›ºå®šï¼‰ -->
    <aside class="fixed left-0 top-32 w-40 h-full shadow dark:text-[#e0e0e0] z-30 ml-2">
      <div id="aside-container">
        <div id="color-info" class="flex flex-col">
          <!-- ç¾åœ¨é¸æŠè‰²è¡¨ç¤º -->
          <h2 class="text-xl font-bold">ç¾åœ¨é¸æŠè‰²</h2>
          <div id="color-display" class="ml-4 text-center w-20 h-20 border border-[#1a1a1a] dark:border-[#e0e0e0]"></div>
          <div class="text-sm">
            <div>NAME: <span id="color-name">-</span></div>
            <div>HEX: <span id="color-hex">#FFFFFF</span></div>
            <div>RGB: <span id="color-rgb">255, 255, 255</span></div>
            <div>HSV: <span id="color-hsv">0, 0, 100</span></div>
          </div>
        </div>
      <!-- ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼è¡¨ç¤º -->
      <div id="history" class="border border-gray-300 h-full p-2.5 mt-4">
        <!-- ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’åŒã˜è¡Œã«é…ç½® -->
        <h3 class="text-lg font-semibold px-4">å±¥æ­´</h3>
        <div class="flex flex-col">
          <button id="download-history"
          class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
          disabled>
          ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰â¬‡
          </button>
      </div>
      <hr>
      <!-- ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®è‰²ãƒœãƒƒã‚¯ã‚¹ã‚’æœ€å¤§16åˆ—ã§è¡¨ç¤º -->
      <div id="history-colors" class="grid grid-cols-1 gap-2 mt-2 max-h-[712px] overflow-y-auto">
        <!-- ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®è‰²ãƒœãƒƒã‚¯ã‚¹ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
      </div>
    </aside>
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="flex-1 ml-40 dark:text-[#e0e0e0] z-30">
      <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¨ä½“ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼åˆ†ã®ä½™ç™½ã‚’ç¢ºä¿ï¼‰ -->
      <div id="container" class="font-sans flex flex-col gap-2 max-w-full">
        <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹ã®ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div id="image-container" class="border-2 border-dashed border-gray-300 " height="320px">
          <div id="canvas-container" class="relative w-full max-w-2xl mx-auto">
            <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
            <canvas id="image-canvas" class="block w-full"></canvas>
            
            <!-- ColorPreviewï¼ˆã‚­ãƒ£ãƒ³ãƒã‚¹ã®ä¸Šã«è¡¨ç¤ºã™ã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ -->
            <div id="color-preview"
            class="color-preview absolute hidden w-20 h-20 border-4 border-white rounded-full flex items-center justify-center font-bold text-lg text-white shadow-lg pointer-events-none z-40 ">
          </div>
          <!-- åº§æ¨™è¡¨ç¤ºã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
          <div id="coordinate-display" class="fixed bottom-4 right-4 bg-gray-800 text-white px-3 py-1 rounded shadow-lg z-50">
            x: 0, y: 0
          </div>
        </div>
        <!-- ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã€ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã€ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—é ˜åŸŸ -->
        <div class="flex items-center gap-3 mb-4">
          <input type="file" id="file-input" accept="image/*" class="p-2 border border-gray-300 py-2 rounded">
          <button id="paste-button" class="px-16 bg-orange-500 rounded hover:bg-orange-600 text-nowrap h-12">ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ğŸ“‹
          </button>
          <div id="drop-area" class="hidden md:inline w-full py-2.5 border-b-2 border-gray-400 bg-gray-50 text-center font-bold">
            ã“ã“ã«ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—
          </div>
        </div>
        
      </div>
      <!-- ç”»åƒã®ãƒ‘ãƒ¬ãƒƒãƒˆè¡¨ç¤º -->
      <div id="palette" class="border border-gray-300 p-2.5">
        <h3 class="text-lg font-semibold">ğŸ¨ç”»åƒã®ãƒ‘ãƒ¬ãƒƒãƒˆ</h3>
        <div id="palette-colors" class="grid gap-1 mt-2"
        style="grid-template-columns: repeat(16, 40px); grid-template-rows: repeat(4, 40px);">
      </div>
      <!-- ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
      <div class="mt-4">
        <h3 class="text-lg font-semibold">ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
        <div>
          <input type="radio" id="history-include-image" name="history-download-option" value="include" class="mr-2" checked>
          <label for="history-include-image">å…ƒç”»åƒã®ä¸‹ã«ãƒ’ã‚¹ãƒˆãƒªãƒ¼æƒ…å ±ã‚’è¿½åŠ ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</label>
        </div>
        <div>
          <input type="radio" id="history-only" name="history-download-option" value="history-only" class="mr-2">
          <label for="history-only">ãƒ’ã‚¹ãƒˆãƒªãƒ¼æƒ…å ±ã®ã¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</label>
        </div>
      </div>
    </div>
    <!-- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
    <div class="mt-4">
      <h3 class="text-lg font-semibold">ãƒ‘ãƒ¬ãƒƒãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
      <div>
        <input type="radio" id="include-image" name="download-option" value="include" class="mr-2" checked>
        <label for="include-image">å…ƒç”»åƒã®ä¸‹ã«ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã‚’è¿½åŠ ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</label>
      </div>
      <div>
        <input type="radio" id="palette-only" name="download-option" value="palette-only" class="mr-2">
        <label for="palette-only">ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã®ã¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</label>
      </div>
      <button id="download-palette"
      class="mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
      disabled>
      ãƒ‘ãƒ¬ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰â¬‡
    </button>
  </div>
  <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
  <div id="error-message"
  class="fixed bottom-0 left-0 w-full bg-[#e0e0e0] p-2.5 text-center text-red-500 border-t border-gray-300 z-50">
</div>

<!-- ä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ï¼ˆåˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤ºï¼‰ -->
<button id="scroll-to-top"
class="fixed bottom-8 right-8 bg-blue-500 text-[#e0e0e0] px-4 py-2 rounded shadow-lg hidden hover:bg-blue-600 z-50">
ä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
</button>
</main>
</div>
  <!-- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ JavaScript -->
  <script>
    // src/color-helper.js

  // ------------------------------------------------
  // ColorHelper ã‚¯ãƒ©ã‚¹ï¼ˆè‰²å¤‰æ›ãƒ»æƒ…å ±å–å¾—ç”¨ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ï¼‰
  // ------------------------------------------------
  class ColorHelper {
    /**
    * ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿  
    * input: æ–‡å­—åˆ—ï¼ˆ"#RRGGBB"å½¢å¼ãªã©ï¼‰ã¾ãŸã¯ {r, g, b} ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    */
    constructor(input) {
      if (typeof input === 'string') {
        this.rgb = ColorHelper.hexToRgb(input);
      } else if (typeof input === 'object' && input.r !== undefined) {
        this.rgb = { r: input.r, g: input.g, b: input.b };
      } else {
        throw new Error("Invalid color input");
      }
    }
    
    /**
    * 16é€²æ•°æ–‡å­—åˆ—ã‹ã‚‰ RGB ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸å¤‰æ›ã™ã‚‹é™çš„ãƒ¡ã‚½ãƒƒãƒ‰
    * @param {string} hex - "#RRGGBB" å½¢å¼ã®æ–‡å­—åˆ—
    * @returns {object} {r, g, b}
    */
    static hexToRgb(hex) {
      hex = hex.replace('#', '');
      if (hex.length === 3) {
        hex = hex.split('').map(ch => ch + ch).join('');
      }
      const bigint = parseInt(hex, 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return { r, g, b };
    }
    
    /**
    * RGBã‹ã‚‰16é€²æ•°è¡¨è¨˜ã«å¤‰æ›ã™ã‚‹é™çš„ãƒ¡ã‚½ãƒƒãƒ‰
    * @param {number} r 
    * @param {number} g 
    * @param {number} b 
    * @returns {string} "#RRGGBB" å½¢å¼ã®æ–‡å­—åˆ—
    */
    static rgbToHex(r, g, b) {
      return "#" + [r, g, b].map(c => c.toString(16).padStart(2, '0')).join('');
    }
    
    /**
    * ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® RGB å€¤ã‹ã‚‰ 16é€²æ•°è¡¨è¨˜ã«å¤‰æ›ã™ã‚‹
    * @returns {string} "#RRGGBB" å½¢å¼ã®æ–‡å­—åˆ—
    */
    toHex() {
      return ColorHelper.rgbToHex(this.rgb.r, this.rgb.g, this.rgb.b);
    }
    
    /**
    * RGBå€¤ã‹ã‚‰ HSV å€¤ã¸å¤‰æ›ã™ã‚‹é™çš„ãƒ¡ã‚½ãƒƒãƒ‰  
    * @param {number} r 
    * @param {number} g 
    * @param {number} b 
    * @returns {Array} [h, s, v]ï¼ˆh: 0ï½360, s,v: 0ï½100ï¼‰
    */
    static rgbToHsv(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);
      let h, s, v = max;
      const d = max - min;
      s = max === 0 ? 0 : d / max;
      if (max === min) {
        h = 0;
      } else {
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return [Math.round(h * 360), Math.round(s * 100), Math.round(v * 100)];
    }
    
    /**
    * ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® RGB å€¤ã‹ã‚‰ HSV å€¤ã¸å¤‰æ›ã™ã‚‹
    * @returns {Array} [h, s, v]ï¼ˆh: 0ï½360, s,v: 0ï½100ï¼‰
    */
    toHsv() {
      return ColorHelper.rgbToHsv(this.rgb.r, this.rgb.g, this.rgb.b);
    }
    /**
    * ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® RGB å€¤ã‹ã‚‰ RGB ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸å¤‰æ›ã™ã‚‹
    * @returns {Array} [r, g, b]
    */
    toRGB() {
      return [this.rgb.r, this.rgb.g, this.rgb.b];
    }
    
    /**
    * ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ï¼šRGBå€¤ã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ
    * @param {number} r
    * @param {number} g
    * @param {number} b
    * @returns {ColorHelper}
    */
    static fromRgb(r, g, b) {
      return new ColorHelper({ r, g, b });
    }
  }
// src/ui.js

  // UI è¦ç´ ã®ç®¡ç†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
  const uiElements = {
    themeToggleBtn: document.getElementById('theme-toggle'),
    fileInput: document.getElementById('file-input'), // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›
    dropArea: document.getElementById('drop-area'),// ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—é ˜åŸŸ
    pasteButton: document.getElementById('paste-button'),// ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰è²¼ã‚Šä»˜ã‘ã‚‹ãƒœã‚¿ãƒ³
    canvas: document.getElementById('image-canvas'),// ç”»åƒã‚’æç”»ã™ã‚‹ã‚­ãƒ£ãƒ³ãƒã‚¹
    canvasContainer: document.getElementById('canvas-container'), /* image-canvasã¨é‡è¤‡ã—ã¦ã„ã‚‹ãŸã‚æœ€çµ‚çš„ã«ã¯ä¸è¦ */
    paletteContainer: document.getElementById('palette-colors'), // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢
    historyContainer: document.getElementById('history-colors'), // ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢
    errorMessage: document.getElementById('error-message'),// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢
    currentColorDisplay: document.getElementById('color-display'),// ç¾åœ¨é¸æŠè‰²è¡¨ç¤º
    colorName: document.getElementById('color-name'),// åå‰ è¡¨ç¤º
    colorHex: document.getElementById('color-hex'),// HEX è¡¨ç¤º
    colorRgb: document.getElementById('color-rgb'),// RGB è¡¨ç¤º
    colorHsv: document.getElementById('color-hsv'),// HSV è¡¨ç¤º
    colorPreview: document.getElementById('color-preview'),// è‰²ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢
    coordinateDisplay: document.getElementById('coordinate-display'), /* åº§æ¨™è¡¨ç¤ºç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¦ç´  */
    scrollToTopButton: document.getElementById('scroll-to-top'), // ä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³
    downloadPaletteBtn: document.getElementById('download-palette'),// ãƒ‘ãƒ¬ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³
    downloadHistoryBtn: document.getElementById('download-history'),// ãƒ’ã‚¹ãƒˆãƒªãƒ¼ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³
    canvasMessage: document.getElementById('canvas-message'),
  };
  
  const ctx = uiElements.canvas.getContext('2d');
  
  // æœ€çµ‚é¸æŠè‰²
  let lastColor = null;
  // å…±é€šã®ãƒ•ãƒ©ã‚°ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ä¸­ã‹ã©ã†ã‹ï¼‰
  let isDragging = false;
  // ãƒ•ãƒ©ã‚°å¤‰æ•°ï¼šæ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å‡¦ç†ã‚’å®Ÿè¡Œä¸­ã‹ã©ã†ã‹ã‚’ç®¡ç†ã—ã¾ã™ã€‚
  let isFrameScheduled = false;
  
  // ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
  function throttledMouseMoveHandler(e) {
    // æ—¢ã«ãƒ•ãƒ¬ãƒ¼ãƒ ãŒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¸ˆã¿ãªã‚‰ä½•ã‚‚ã—ãªã„
    if (isFrameScheduled){
      return;
    }

    isFrameScheduled = true;
    requestAnimationFrame(() => {
      // ã‚«ãƒ©ãƒ¼æƒ…å ±ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
      updateColorPreview(e);

      // ãƒ•ãƒ¬ãƒ¼ãƒ å®Ÿè¡Œå¾Œã«ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
      isFrameScheduled = false;
    });
  }
  /**
  * äº¤äº’é–‹å§‹æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ï¼ˆãƒã‚¦ã‚¹ã€ã‚¿ãƒƒãƒã©ã¡ã‚‰ã‚‚ï¼‰
  * @param {Event} e 
  */
  function onInteractionStart(e) {
    e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã®æŠ‘åˆ¶ï¼ˆã‚¿ãƒƒãƒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã©ã‚’é˜²ãï¼‰
    isDragging = true;
    throttledMouseMoveHandler(e);
  }
  
  /**
  * ç§»å‹•æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ï¼ˆãƒã‚¦ã‚¹ï¼‰
  * @param {Event} e 
  */
  function onInteractionMove(e) {
    e.preventDefault();
    if (isDragging) {
      throttledMouseMoveHandler(e);
    }
  }
  
  /**
  * çµ‚äº†æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ï¼ˆãƒã‚¦ã‚¹ã€ã‚¿ãƒƒãƒã©ã¡ã‚‰ã‚‚ï¼‰
  * @param {Event} e 
  */
  function onInteractionEnd(e) {
    e.preventDefault();
    isDragging = false;
  }
  
  // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã®ç™»éŒ²
  uiElements.canvas.addEventListener('mousedown', onInteractionStart);
  uiElements.canvas.addEventListener('mousemove', onInteractionMove);
  uiElements.canvas.addEventListener('mouseup', onInteractionEnd);
  
  // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã®ç™»éŒ²
  uiElements.canvas.addEventListener('touchstart', onInteractionStart);
  uiElements.canvas.addEventListener('touchmove', (e) => {
     e.preventDefault();
     // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã®å ´åˆã¯æœ€åˆã®ã‚¿ãƒƒãƒæƒ…å ±ã‚’ä½¿ã†
     throttledMouseMoveHandler(e.touches[0]);
  });
  uiElements.canvas.addEventListener('touchend', onInteractionEnd);
  
  /**
  * ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã®åº§æ¨™ã‚’å–å¾—ã™ã‚‹é–¢æ•°
  * @param {Event} e - ãƒã‚¦ã‚¹ã¾ãŸã¯ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ
  * @param {HTMLCanvasElement} canvas - å¯¾è±¡ã®ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´ 
  * @returns {object} { x, y } ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã®åº§æ¨™
  */
  function getCanvasCoordinates(e, canvas) {
    const rect = canvas.getBoundingClientRect();
    let clientX, clientY;
    if (e.touches && e.touches.length) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;
    return {
      x: Math.floor((clientX - rect.left) * scaleX),
      y: Math.floor((clientY - rect.top) * scaleY)
    };
  }
  
  // ã‚«ãƒ©ãƒ¼æ›´æ–°å‡¦ç†
  const updateColorPreview = (e) => {
    const { x, y } = getCanvasCoordinates(e, uiElements.canvas);
    // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¡¨ç¤ºã‚’æ›´æ–°
    uiElements.coordinateDisplay.textContent = `x: ${x}, y: ${y}`;
    const [r, g, b, a] = ctx.getImageData(x, y, 1, 1).data;
    if (a === 0) return;
    
    const hex = ColorHelper.rgbToHex(r, g, b);
    
    // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚³ãƒ³ãƒ†ãƒŠã®åº§æ¨™ã‚’å–å¾—
    const containerRect = uiElements.canvasContainer.getBoundingClientRect();
    
    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ›´æ–°ï¼ˆã‚³ãƒ³ãƒ†ãƒŠå†…ã®åº§æ¨™ã«å¤‰æ›ï¼‰
    uiElements.colorPreview.style.backgroundColor = hex;
    uiElements.colorPreview.style.color = isDarkColor(hex) ? '#ffffff' : '#000000';
    uiElements.colorPreview.textContent = hex;
    // containerå†…ã®ç›¸å¯¾ä½ç½®ã«å¤‰æ›ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ã‚ºã¯80pxãªã®ã§åŠåˆ†ã®40pxã‚’å¼•ãï¼‰
    uiElements.colorPreview.style.left = `${e.clientX - containerRect.left - 40}px`;
    uiElements.colorPreview.style.top = `${e.clientY - containerRect.top - 40}px`;
    uiElements.colorPreview.style.display = 'flex';
  };
  
  /** ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ï¼š16é€²æ•°ã‹ã‚‰ç¾åœ¨è‰²è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹
  * @param {string} hex
  */
  function updateCurrentColor(hex) {
    uiElements.currentColorDisplay.style.background = hex;
    uiElements.colorHex.textContent = hex;
    const currentColorName = NamedColor.findByHex(hex);
    if (currentColorName === null) {
      uiElements.colorName.textContent = "-";
    } else {
      uiElements.colorName.textContent = currentColorName;
    }
    
    const currentColor = new ColorHelper(hex);
    const [r, g, b] = currentColor.toRGB();
    uiElements.colorRgb.textContent = `${r}, ${g}, ${b}`;
    const [h, s, v] = currentColor.toHsv();
    uiElements.colorHsv.textContent = `${h}, ${s}, ${v}`;
  }
  
  let img = new Image();
  
  // ç”»åƒèª­ã¿è¾¼ã¿å‡¦ç†
  function loadImage(file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      // å¤ã„ img ã®å‚ç…§ã‚’è§£æ”¾
      if (img) {
        img.onload = null;   // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’è§£é™¤
        if (img.src && img.src.startsWith('blob:')) {
          URL.revokeObjectURL(img.src);  // Blob URL ã‚’è§£æ”¾
        }
        img.src = "";         // ç”»åƒã®å‚ç…§ã‚’è§£é™¤
        img = null;           // å‚ç…§ã‚’å®Œå…¨ã«åˆ‡ã‚Šé›¢ã™
      }
      img = new Image();
      img.onload = function () {
        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã‚’ç”»åƒã‚µã‚¤ã‚ºã«åˆã‚ã›ã‚‹
        uiElements.canvas.width = img.width;
        uiElements.canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        analyzeColors();
      }
      img.src = e.target.result;
    }
    reader.readAsDataURL(file);
  }
  
  // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®å‡¦ç†
  uiElements.fileInput.addEventListener('change', (e) => {
    if (e.target.files && e.target.files[0]) {
      loadImage(e.target.files[0]);
    }
  });
  
  // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‹ã‚‰ç”»åƒã‚’èª­ã¿è¾¼ã‚€å‡¦ç†
  async function handlePasteButtonClick() {
    try {
      const clipboardItems = await navigator.clipboard.read();
      for (const item of clipboardItems) {
        for (const type of item.types) {
          if (type.startsWith('image/')) {
            const blob = await item.getType(type);
            loadImage(blob);
            return;
          }
        }
      }
      alert("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ç”»åƒãŒã‚ã‚Šã¾ã›ã‚“");
    } catch (error) {
      console.error("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®ç”»åƒå–å¾—ã«å¤±æ•—:", error);
      alert("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®ç”»åƒã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®æ¨©é™ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
    }
  }
  // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
  uiElements.pasteButton.addEventListener('click', handlePasteButtonClick);
  
  // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã®å‡¦ç†
  uiElements.dropArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    uiElements.dropArea.style.background = "#eee";
  });
  uiElements.dropArea.addEventListener('dragleave', (e) => {
    e.preventDefault();
    uiElements.dropArea.style.background = "";
  });
  uiElements.dropArea.addEventListener('drop', (e) => {
    e.preventDefault();
    uiElements.dropArea.style.background = "";
    if (e.dataTransfer.files && e.dataTransfer.files[0]) {
      loadImage(e.dataTransfer.files[0]);
    }
  });
  
  // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆè§£æ
  function analyzeColors() {
    // ç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿å–å¾—
    const width = uiElements.canvas.width;
    const height = uiElements.canvas.height;
    const imageData = ctx.getImageData(0, 0, width, height);
    const data = imageData.data;
    const colorCount = {};
    
    // å…¨ãƒ”ã‚¯ã‚»ãƒ«ã‚’å¯¾è±¡ã«ã™ã‚‹ã¨é‡ã„ã®ã§ã€ä¸€å®šé–“éš”ï¼ˆä¾‹: 10pxï¼‰ã§ã‚µãƒ³ãƒ—ãƒ«
    const step = 10;
    for (let y = 0; y < height; y += step) {
      for (let x = 0; x < width; x += step) {
        const index = (y * width + x) * 4;
        const r = data[index];
        const g = data[index + 1];
        const b = data[index + 2];
        // é€æ˜åº¦ãŒä½ã„ã‚‚ã®ã¯é™¤å¤–ï¼ˆå¿…è¦ã«å¿œã˜ã¦èª¿æ•´ï¼‰
        const a = data[index + 3];
        if (a < 128) continue;
        // ç°¡æ˜“é‡å­åŒ–ï¼šå„ãƒãƒ£ãƒ³ãƒãƒ«ã‚’16æ®µéšã«ä¸¸ã‚ã‚‹
        const key = [
        Math.floor(r / 16) * 16,
        Math.floor(g / 16) * 16,
        Math.floor(b / 16) * 16
        ].join(',');
        colorCount[key] = (colorCount[key] || 0) + 1;
      }
    }
    
    // å‡ºç¾é »åº¦ãŒé«˜ã„é †ã«ã‚½ãƒ¼ãƒˆã—ã€ä¸Šä½64è‰²ã‚’æŠ½å‡º
    const sortedColors = Object.entries(colorCount)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 64);
    
    // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚¯ãƒªã‚¢
    uiElements.paletteContainer.innerHTML = "";
    // ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚¯ãƒªã‚¢
    uiElements.historyContainer.innerHTML = "";
    // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆãŒç©ºã«ãªã£ãŸã®ã§ç„¡åŠ¹åŒ–
    uiElements.downloadPaletteBtn.disabled = true;
    // ãƒ’ã‚¹ãƒˆãƒªãƒ¼ãŒç©ºã«ãªã£ãŸã®ã§ç„¡åŠ¹åŒ–
    uiElements.downloadHistoryBtn.disabled = true;
    
    // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆè¡¨ç¤ºï¼ˆæ¨ª16å€‹Ã—ç¸¦4å€‹ã®ã‚°ãƒªãƒƒãƒ‰ï¼‰
    sortedColors.forEach(([colorKey, count]) => {
      const [r, g, b] = colorKey.split(',').map(Number);
      const hex = ColorHelper.rgbToHex(r, g, b);
      const colorDiv = document.createElement('div');
      colorDiv.className = 'color-box';
      colorDiv.style.background = hex;
      colorDiv.title = `${hex} (${count}å›)`;
      colorDiv.textContent = "";
      
      colorDiv.addEventListener('click', () => {
        updateCurrentColor(hex);
        addColorToHistory(hex);
      });
      uiElements.paletteContainer.appendChild(colorDiv);
    });
    
    uiElements.downloadPaletteBtn.disabled = uiElements.paletteContainer.children.length === 0;
  }
  
  // ãƒã‚¦ã‚¹ç§»å‹•æ™‚ã«ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ã®è‰²ã‚’å–å¾—ã—ã¦è¡¨ç¤º
  uiElements.canvas.addEventListener('mousemove', (e) => {
    const { x, y } = getCanvasCoordinates(e, uiElements.canvas);
    const pixel = ctx.getImageData(x, y, 1, 1).data;
    const [r, g, b, a] = pixel;
    if (a === 0) return;  // é€æ˜ãªå ´åˆã¯ç„¡è¦–
    const hex = ColorHelper.rgbToHex(r, g, b);
    updateCurrentColor(hex)
  });
  
  // ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ç¾åœ¨ã®ã‚«ãƒ¼ã‚½ãƒ«è‰²ã‚’ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã«è¿½åŠ 
  uiElements.canvas.addEventListener('click', (e) => {
    const { x, y } = getCanvasCoordinates(e, uiElements.canvas);
    const pixel = ctx.getImageData(x, y, 1, 1).data;
    const [r, g, b, a] = pixel;
    if (a === 0) return;
    const hex = ColorHelper.rgbToHex(r, g, b);
    addColorToHistory(hex);
  });
  /** æ˜åº¦åˆ¤å®šã®ãŸã‚ã®é–¢æ•°ï¼ˆè¼åº¦è¨ˆç®—ï¼‰
  * @param {string} hex
  */
  function isDarkColor(hex) {
    // hex ãŒ "#RRGGBB" å½¢å¼ã®å ´åˆ
    const { r, g, b } = ColorHelper.hexToRgb(hex)
    // è¼åº¦ã®è¨ˆç®—ï¼ˆITU-R BT.601 ä¿‚æ•°ã‚’åˆ©ç”¨ï¼‰
    const brightness = (r * 299 + g * 587 + b * 114) / 1000;
    return brightness < 128; // è¼åº¦ãŒä½ã‘ã‚Œã°æš—ã„ã¨åˆ¤æ–­
  }
  /** ã‚«ãƒ©ãƒ¼ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã«è‰²ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°
  * @param {string} hex
  */
  function addColorToHistory(hex) {
    if (hex === lastColor) {
      uiElements.errorMessage.textContent = "ç›´å‰ã®è‰²ã¨åŒã˜ãŸã‚è¿½åŠ ã§ãã¾ã›ã‚“ã€‚";
      return;
    }
    uiElements.errorMessage.textContent = "";  // ã‚¨ãƒ©ãƒ¼è§£é™¤
    lastColor = hex;
    
    const colorDiv = document.createElement('div');
    colorDiv.className = 'color-box';
    colorDiv.style.background = hex;
    colorDiv.style.color = isDarkColor(hex) ? "#ffffff" : "#000000";
    colorDiv.title = hex;
    colorDiv.textContent = hex;
    uiElements.historyContainer.prepend(colorDiv);
    // ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã«é …ç›®ãŒè¿½åŠ ã•ã‚ŒãŸã®ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
    uiElements.downloadHistoryBtn.disabled = uiElements.historyContainer.children.length === 0;
  }
  
    /**
    * æŒ‡å®šã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã®å„ã‚«ãƒ©ãƒ¼ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚­ãƒ£ãƒ³ãƒã‚¹ã«æç”»ã™ã‚‹å…±é€šé–¢æ•°
    * @param {CanvasRenderingContext2D} ctx - æç”»å…ˆã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
    * @param {HTMLElement} container - ã‚«ãƒ©ãƒ¼ãƒœãƒƒã‚¯ã‚¹ãŒå«ã¾ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒŠï¼ˆä¾‹ï¼šhistoryContainer ã‚„ paletteContainerï¼‰
    * @param {number} itemSize - å„è‰²ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰
    * @param {number} columns - 1è¡Œã‚ãŸã‚Šã®ãƒœãƒƒã‚¯ã‚¹æ•°
    * @param {number} offsetY - ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã«æç”»ã™ã‚‹éš›ã®ç¸¦æ–¹å‘ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆ
    */
    function drawColorBoxes(ctx, container, itemSize, columns, offsetY) {
      const items = container.querySelectorAll('.color-box');
      items.forEach((item, index) => {
        const col = index % columns;
        const row = Math.floor(index / columns);
        // title å±æ€§ã« hex ãŒå…¥ã£ã¦ã„ã‚‹å‰æï¼ˆã‚‚ã—ãã¯ style.backgroundColorï¼‰
        const hex = item.title || item.style.backgroundColor;
        ctx.fillStyle = hex;
        ctx.fillRect(col * itemSize, offsetY + row * itemSize, itemSize, itemSize);
        // å¢ƒç•Œç·šã®æç”»
        ctx.strokeStyle = "#000";
        ctx.strokeRect(col * itemSize, offsetY + row * itemSize, itemSize, itemSize);
      });
    }
  
  // ãƒ’ã‚¹ãƒˆãƒªãƒ¼ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†
  uiElements.downloadHistoryBtn.addEventListener('click', () => {
    // ãƒ’ã‚¹ãƒˆãƒªãƒ¼å†…ã®è‰²ãƒœãƒƒã‚¯ã‚¹ã‚’ã¾ã¨ã‚ãŸã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ä½œæˆ
    const historyItems = uiElements.historyContainer.querySelectorAll('.color-box');
    if (historyItems.length === 0) {
      alert("ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã«è‰²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
      return;
    }
    // é¸æŠã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—
    const selectedOption = document.querySelector('input[name="history-download-option"]:checked').value;
    if (selectedOption === "include") {
      // å…ƒç”»åƒä»˜ãã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const downloadCanvas = document.createElement('canvas');
      // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®é«˜ã•ã¯å…ƒç”»åƒã¨ãƒ’ã‚¹ãƒˆãƒªãƒ¼é ˜åŸŸã®é«˜ã•ã‚’åˆã‚ã›ã‚‹
      downloadCanvas.width = uiElements.canvas.width;
      downloadCanvas.height = uiElements.canvas.height + uiElements.historyContainer.offsetHeight + 20;
      const downloadCtx = downloadCanvas.getContext('2d');
      
      // å…ƒç”»åƒã‚’æç”»
      downloadCtx.drawImage(img, 0, 0);
      
      // ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã®è‰²ãƒœãƒƒã‚¯ã‚¹ã‚’å…ƒç”»åƒã®ä¸‹ã«æç”»
      const itemSize = 40;  // å„è‰²ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚º
      let yOffset = uiElements.canvas.height + 10;
      historyItems.forEach((item, index) => {
        const col = index % 10;
        const row = Math.floor(index / 10);
        downloadCtx.fillStyle = item.title;  // title å±æ€§ã« hex å€¤ã‚’è¨­å®šã—ã¦ã„ã‚‹
        downloadCtx.fillRect(col * itemSize, yOffset + row * itemSize, itemSize, itemSize);
        // å¢ƒç•Œç·šæç”»
        downloadCtx.strokeStyle = "#000";
        downloadCtx.strokeRect(col * itemSize, yOffset + row * itemSize, itemSize, itemSize);
      });
      
      const dataURL = downloadCanvas.toDataURL("image/png");
      const a = document.createElement('a');
      const now = new Date().toISOString();
      a.download = `color_history_with_image_${now}.png`;
      a.href = dataURL;
      a.click();
      
    } else {
      // ãƒ’ã‚¹ãƒˆãƒªãƒ¼æƒ…å ±ã®ã¿ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const downloadCanvas = document.createElement('canvas');
      downloadCanvas.width = uiElements.historyContainer.offsetWidth;
      downloadCanvas.height = uiElements.historyContainer.offsetHeight;
      const downloadCtx = downloadCanvas.getContext('2d');
      
      const itemSize = 40;
      historyItems.forEach((item, index) => {
        const col = index % 10;
        const row = Math.floor(index / 10);
        downloadCtx.fillStyle = item.title;
        downloadCtx.fillRect(col * itemSize, row * itemSize, itemSize, itemSize);
      });
      
      const dataURL = downloadCanvas.toDataURL("image/png");
      const a = document.createElement('a');
      const now = new Date().toISOString();
      a.download = `color_history_only_${now}.png`;
      a.href = dataURL;
      a.click();
    }
  });
  
    // ãƒ‘ãƒ¬ãƒƒãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡¦ç†
  uiElements.downloadPaletteBtn.addEventListener('click', () => {
    const selectedOption = document.querySelector('input[name="download-option"]:checked').value;
    
    if (selectedOption === "include") {
      // å…ƒç”»åƒã®ä¸‹ã«ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã‚’è¿½åŠ ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const downloadCanvas = document.createElement('canvas');
      downloadCanvas.width = uiElements.canvas.width;
      downloadCanvas.height = uiElements.canvas.height + uiElements.paletteContainer.offsetHeight + 20;
      const downloadCtx = downloadCanvas.getContext('2d');
      
      // å…ƒç”»åƒã‚’ã‚­ãƒ£ãƒ³ãƒã‚¹ã«æç”»
      downloadCtx.drawImage(img, 0, 0);
      
      // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã‚’æç”»
      let yOffset = uiElements.canvas.height + 10;
      const colorDivs = uiElements.paletteContainer.querySelectorAll('.color-box');
      colorDivs.forEach((colorDiv, index) => {
        const hex = colorDiv.style.backgroundColor;
        downloadCtx.fillStyle = hex;
        downloadCtx.fillRect(index % 16 * 40, yOffset + Math.floor(index / 16) * 40, 40, 40);
      });
      
      // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const dataURL = downloadCanvas.toDataURL('image/png');
      const a = document.createElement('a');
      const now = new Date().toISOString();
      a.download = `image_with_palette_${now}.png`;
      a.href = dataURL;
      a.click();
    } else {
      // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã®ã¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const downloadCanvas = document.createElement('canvas');
      downloadCanvas.width = uiElements.paletteContainer.offsetWidth;
      downloadCanvas.height = uiElements.paletteContainer.offsetHeight;
      const downloadCtx = downloadCanvas.getContext('2d');
      
      // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆæƒ…å ±ã‚’æç”»
      const colorDivs = uiElements.paletteContainer.querySelectorAll('.color-box');
      colorDivs.forEach((colorDiv, index) => {
        const hex = colorDiv.style.backgroundColor;
        downloadCtx.fillStyle = hex;
        downloadCtx.fillRect(index % 16 * 40, Math.floor(index / 16) * 40, 40, 40);
      });
      
      // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      const dataURL = downloadCanvas.toDataURL('image/png');
      const a = document.createElement('a');
      const now = new Date().toISOString();
      a.download = `palette_only_${now}.png`;
      a.href = dataURL;
      a.click();
    }
  });
  
    /**
    * ä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ©Ÿèƒ½
    */
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã§ã€Œä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºåˆ‡æ›¿
  window.addEventListener('scroll', () => {
    // ãƒ˜ãƒƒãƒ€ãƒ¼ã®é«˜ã•ï¼ˆã“ã®ä¾‹ã§ã¯ç´„80pxï¼‰
    const headerHeight = 80;
    if (window.scrollY > headerHeight) {
      uiElements.scrollToTopButton.classList.remove('hidden');
    } else {
      uiElements.scrollToTopButton.classList.add('hidden');
    }
  });
  
  // ã€Œä¸€ç•ªä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  uiElements.scrollToTopButton.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
// src/theme-manager.js

  // ãƒ†ãƒ¼ãƒç®¡ç†ã‚¯ãƒ©ã‚¹
  class ThemeManager {
    /**
    * ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
    * ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«é¸æŠã—ãŸãƒ†ãƒ¼ãƒï¼ˆãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ãƒ»ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼‰ã‚’ä¿å­˜ã—ã€è¡¨ç¤ºæ™‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚
    */
    constructor() {
      this.currentMode = localStorage.getItem('theme') || 'light';
      this.themeToggleBtn = uiElements.themeToggleBtn;
      this.initialize();
    }
    /**
    * åˆæœŸåŒ–é–¢æ•°
    */
    initialize() {
      this.applyTheme();
      this.themeToggleBtn.addEventListener('click', () => this.toggleTheme());
    }
    /**
    * ãƒ†ãƒ¼ãƒã‚’é©ç”¨ã—ç”»é¢ã«è¡¨ç¤ºã™ã‚‹é–¢æ•°
    */
    applyTheme() {
      const isDark = this.currentMode === 'dark';
      document.body.classList.toggle('dark', isDark);
      document.body.classList.toggle('bg-gray-900', isDark);
      document.body.classList.toggle('bg-gray-100', !isDark);
      this.themeToggleBtn.firstChild.textContent = isDark ? "â˜€ãƒ©ã‚¤ãƒˆ" : "ğŸŒ™ãƒ€ãƒ¼ã‚¯";
      this.themeToggleBtn.classList.toggle('text-white', isDark);
      this.themeToggleBtn.classList.toggle('text-black', !isDark);
      localStorage.setItem('theme', this.currentMode);
    }
    /**
    * ãƒ†ãƒ¼ãƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
    */
    toggleTheme() {
      this.currentMode = this.currentMode === 'light' ? 'dark' : 'light';
      this.applyTheme();
    }
  }
// src/named-color.js

class NamedColor {
    static COLORS = {
	"black": { hex: "#000000", rgb: [0, 0, 0] },
	"silver": { hex: "#C0C0C0", rgb: [192, 192, 192] },
	"gray": { hex: "#808080", rgb: [128, 128, 128] },
	"white": { hex: "#FFFFFF", rgb: [255, 255, 255] },
	"maroon": { hex: "#800000", rgb: [128, 0, 0] },
	"red": { hex: "#FF0000", rgb: [255, 0, 0] },
	"purple": { hex: "#800080", rgb: [128, 0, 128] },
	"fuchsia": { hex: "#FF00FF", rgb: [255, 0, 255] },
	"green": { hex: "#008000", rgb: [0, 128, 0] },
	"lime": { hex: "#00FF00", rgb: [0, 255, 0] },
	"olive": { hex: "#808000", rgb: [128, 128, 0] },
	"yellow": { hex: "#FFFF00", rgb: [255, 255, 0] },
	"navy": { hex: "#000080", rgb: [0, 0, 128] },
	"blue": { hex: "#0000FF", rgb: [0, 0, 255] },
	"teal": { hex: "#008080", rgb: [0, 128, 128] },
	"aqua": { hex: "#00FFFF", rgb: [0, 255, 255] },
	"aliceblue": { hex: "#f0f8ff", rgb: [240, 248, 255] },
	"antiquewhite": { hex: "#faebd7", rgb: [250, 235, 215] },
	"aquamarine": { hex: "#7fffd4", rgb: [127, 255, 212] },
	"azure": { hex: "#f0ffff", rgb: [240, 255, 255] },
	"beige": { hex: "#f5f5dc", rgb: [245, 245, 220] },
	"bisque": { hex: "#ffe4c4", rgb: [255, 228, 196] },
	"blanchedalmond": { hex: "#ffebcd", rgb: [255, 235, 205] },
	"blueviolet": { hex: "#8a2be2", rgb: [138, 43, 226] },
	"brown": { hex: "#a52a2a", rgb: [165, 42, 42] },
	"burlywood": { hex: "#deb887", rgb: [222, 184, 135] },
	"cadetblue": { hex: "#5f9ea0", rgb: [95, 158, 160] },
	"chartreuse": { hex: "#7fff00", rgb: [127, 255, 0] },
	"chocolate": { hex: "#d2691e", rgb: [210, 105, 30] },
	"coral": { hex: "#ff7f50", rgb: [255, 127, 80] },
	"cornflowerblue": { hex: "#6495ed", rgb: [100, 149, 237] },
	"cornsilk": { hex: "#fff8dc", rgb: [255, 248, 220] },
	"crimson": { hex: "#dc143c", rgb: [220, 20, 60] },
	"cyan": { hex: "#00ffff", rgb: [0, 255, 255] },
	"darkblue": { hex: "#00008b", rgb: [0, 0, 139] },
	"darkcyan": { hex: "#008b8b", rgb: [0, 139, 139] },
	"darkgoldenrod": { hex: "#b8860b", rgb: [184, 134, 11] },
	"darkgray": { hex: "#a9a9a9", rgb: [169, 169, 169] },
	"darkgreen": { hex: "#006400", rgb: [0, 100, 0] },
	"darkgrey": { hex: "#a9a9a9", rgb: [169, 169, 169] },
	"darkkhaki": { hex: "#bdb76b", rgb: [189, 183, 107] },
	"darkmagenta": { hex: "#8b008b", rgb: [139, 0, 139] },
	"darkolivegreen": { hex: "#556b2f", rgb: [85, 107, 47] },
	"darkorange": { hex: "#ff8c00", rgb: [255, 140, 0] },
	"darkorchid": { hex: "#9932cc", rgb: [153, 50, 204] },
	"darkred": { hex: "#8b0000", rgb: [139, 0, 0] },
	"darksalmon": { hex: "#e9967a", rgb: [233, 150, 122] },
	"darkseagreen": { hex: "#8fbc8f", rgb: [143, 188, 143] },
	"darkslateblue": { hex: "#483d8b", rgb: [72, 61, 139] },
	"darkslategray": { hex: "#2f4f4f", rgb: [47, 79, 79] },
	"darkslategrey": { hex: "#2f4f4f", rgb: [47, 79, 79] },
	"darkturquoise": { hex: "#00ced1", rgb: [0, 206, 209] },
	"darkviolet": { hex: "#9400d3", rgb: [148, 0, 211] },
	"deeppink": { hex: "#ff1493", rgb: [255, 20, 147] },
	"deepskyblue": { hex: "#00bfff", rgb: [0, 191, 255] },
	"dimgray": { hex: "#696969", rgb: [105, 105, 105] },
	"dimgrey": { hex: "#696969", rgb: [105, 105, 105] },
	"dodgerblue": { hex: "#1e90ff", rgb: [30, 144, 255] },
	"firebrick": { hex: "#b22222", rgb: [178, 34, 34] },
	"floralwhite": { hex: "#fffaf0", rgb: [255, 250, 240] },
	"forestgreen": { hex: "#228b22", rgb: [34, 139, 34] },
	"gainsboro": { hex: "#dcdcdc", rgb: [220, 220, 220] },
	"ghostwhite": { hex: "#f8f8ff", rgb: [248, 248, 255] },
	"gold": { hex: "#ffd700", rgb: [255, 215, 0] },
	"goldenrod": { hex: "#daa520", rgb: [218, 165, 32] },
	"greenyellow": { hex: "#adff2f", rgb: [173, 255, 47] },
	"grey": { hex: "#808080", rgb: [128, 128, 128] },
	"honeydew": { hex: "#f0fff0", rgb: [240, 255, 240] },
	"hotpink": { hex: "#ff69b4", rgb: [255, 105, 180] },
	"indianred": { hex: "#cd5c5c", rgb: [205, 92, 92] },
	"indigo": { hex: "#4b0082", rgb: [75, 0, 130] },
	"ivory": { hex: "#fffff0", rgb: [255, 255, 240] },
	"khaki": { hex: "#f0e68c", rgb: [240, 230, 140] },
	"lavender": { hex: "#e6e6fa", rgb: [230, 230, 250] },
	"lavenderblush": { hex: "#fff0f5", rgb: [255, 240, 245] },
	"lawngreen": { hex: "#7cfc00", rgb: [124, 252, 0] },
	"lemonchiffon": { hex: "#fffacd", rgb: [255, 250, 205] },
	"lightblue": { hex: "#add8e6", rgb: [173, 216, 230] },
	"lightcoral": { hex: "#f08080", rgb: [240, 128, 128] },
	"lightcyan": { hex: "#e0ffff", rgb: [224, 255, 255] },
	"lightgoldenrodyellow": { hex: "#fafad2", rgb: [250, 250, 210] },
	"lightgray": { hex: "#d3d3d3", rgb: [211, 211, 211] },
	"lightgreen": { hex: "#90ee90", rgb: [144, 238, 144] },
	"lightgrey": { hex: "#d3d3d3", rgb: [211, 211, 211] },
	"lightpink": { hex: "#ffb6c1", rgb: [255, 182, 193] },
	"lightsalmon": { hex: "#ffa07a", rgb: [255, 160, 122] },
	"lightseagreen": { hex: "#20b2aa", rgb: [32, 178, 170] },
	"lightskyblue": { hex: "#87cefa", rgb: [135, 206, 250] },
	"lightslategray": { hex: "#778899", rgb: [119, 136, 153] },
	"lightslategrey": { hex: "#778899", rgb: [119, 136, 153] },
	"lightsteelblue": { hex: "#b0c4de", rgb: [176, 196, 222] },
	"lightyellow": { hex: "#ffffe0", rgb: [255, 255, 224] },
	"limegreen": { hex: "#32cd32", rgb: [50, 205, 50] },
	"linen": { hex: "#faf0e6", rgb: [250, 240, 230] },
	"magenta": { hex: "#ff00ff", rgb: [255, 0, 255] },
	"mediumaquamarine": { hex: "#66cdaa", rgb: [102, 205, 170] },
	"mediumblue": { hex: "#0000cd", rgb: [0, 0, 205] },
	"mediumorchid": { hex: "#ba55d3", rgb: [186, 85, 211] },
	"mediumpurple": { hex: "#9370db", rgb: [147, 112, 219] },
	"mediumseagreen": { hex: "#3cb371", rgb: [60, 179, 113] },
	"mediumslateblue": { hex: "#7b68ee", rgb: [123, 104, 238] },
	"mediumspringgreen": { hex: "#00fa9a", rgb: [0, 250, 154] },
	"mediumturquoise": { hex: "#48d1cc", rgb: [72, 209, 204] },
	"mediumvioletred": { hex: "#c71585", rgb: [199, 21, 133] },
	"midnightblue": { hex: "#191970", rgb: [25, 25, 112] },
	"mintcream": { hex: "#f5fffa", rgb: [245, 255, 250] },
	"mistyrose": { hex: "#ffe4e1", rgb: [255, 228, 225] },
	"moccasin": { hex: "#ffe4b5", rgb: [255, 228, 181] },
	"navajowhite": { hex: "#ffdead", rgb: [255, 222, 173] },
	"oldlace": { hex: "#fdf5e6", rgb: [253, 245, 230] },
	"olivedrab": { hex: "#6b8e23", rgb: [107, 142, 35] },
	"orange": { hex: "#ffa500", rgb: [255, 165, 0] },
	"orangered": { hex: "#ff4500", rgb: [255, 69, 0] },
	"orchid": { hex: "#da70d6", rgb: [218, 112, 214] },
	"palegoldenrod": { hex: "#eee8aa", rgb: [238, 232, 170] },
	"palegreen": { hex: "#98fb98", rgb: [152, 251, 152] },
	"paleturquoise": { hex: "#afeeee", rgb: [175, 238, 238] },
	"palevioletred": { hex: "#db7093", rgb: [219, 112, 147] },
	"papayawhip": { hex: "#ffefd5", rgb: [255, 239, 213] },
	"peachpuff": { hex: "#ffdab9", rgb: [255, 218, 185] },
	"peru": { hex: "#cd853f", rgb: [205, 133, 63] },
	"pink": { hex: "#ffc0cb", rgb: [255, 192, 203] },
	"plum": { hex: "#dda0dd", rgb: [221, 160, 221] },
	"powderblue": { hex: "#b0e0e6", rgb: [176, 224, 230] },
	"rosybrown": { hex: "#bc8f8f", rgb: [188, 143, 143] },
	"royalblue": { hex: "#4169e1", rgb: [65, 105, 225] },
	"saddlebrown": { hex: "#8b4513", rgb: [139, 69, 19] },
	"salmon": { hex: "#fa8072", rgb: [250, 128, 114] },
	"sandybrown": { hex: "#f4a460", rgb: [244, 164, 96] },
	"seagreen": { hex: "#2e8b57", rgb: [46, 139, 87] },
	"seashell": { hex: "#fff5ee", rgb: [255, 245, 238] },
	"sienna": { hex: "#a0522d", rgb: [160, 82, 45] },
	"skyblue": { hex: "#87ceeb", rgb: [135, 206, 235] },
	"slateblue": { hex: "#6a5acd", rgb: [106, 90, 205] },
	"slategray": { hex: "#708090", rgb: [112, 128, 144] },
	"slategrey": { hex: "#708090", rgb: [112, 128, 144] },
	"snow": { hex: "#fffafa", rgb: [255, 250, 250] },
	"springgreen": { hex: "#00ff7f", rgb: [0, 255, 127] },
	"steelblue": { hex: "#4682b4", rgb: [70, 130, 180] },
	"tan": { hex: "#d2b48c", rgb: [210, 180, 140] },
	"thistle": { hex: "#d8bfd8", rgb: [216, 191, 216] },
	"tomato": { hex: "#ff6347", rgb: [255, 99, 71] },
	"turquoise": { hex: "#40e0d0", rgb: [64, 224, 208] },
	"violet": { hex: "#ee82ee", rgb: [238, 130, 238] },
	"wheat": { hex: "#f5deb3", rgb: [245, 222, 179] },
	"whitesmoke": { hex: "#f5f5f5", rgb: [245, 245, 245] },
	"yellowgreen": { hex: "#9acd32", rgb: [154, 205, 50] }
    };
    static findByHex(hex) {
      hex = hex.toLowerCase();
      for (const [name, color] of Object.entries(NamedColor.COLORS)) {
         if (color.hex.toLowerCase() === hex) {
             return name;
         }
     }
     return null;
    }
}
// src/main.js

  // -------------------------------
  // ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãƒ»åˆæœŸè¡¨ç¤ºå‡¦ç†
  // -------------------------------
  this.themeManager = new ThemeManager();

  </script>
</body>
</html>